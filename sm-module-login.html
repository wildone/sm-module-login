<html><head><meta charset="UTF-8"><link rel="import" href="../sm-utility-auth/sm-utility-auth.html"><link rel="import" href="../sm-ui-button/sm-ui-button.html"><link rel="import" href="../sm-ui-modal/sm-ui-modal.html"><link rel="import" href="../simpla-core/simpla-core.html"><link rel="import" href="../polymer/polymer.html"></head><body><dom-module id="sm-module-login"> <template> <style include="sm-css"></style><link rel="stylesheet" href="./sm-module-login.css"> <sm-ui-modal class="login" id="modal" title="Login" active=""> <form on-submit="login" class="login__form" id="form"> <input id="email" class="login__form__input" value="{{email::input}}" type="text" placeholder="Enter your username"> <input id="password" class="login__form__input" value="{{password::input}}" type="password" placeholder="Enter your password"> <div id="error" class="login__error">[[errorMessage]]</div> <sm-ui-button on-tap="login" id="submit" class="login__form__submit" busy="[[busy]]">Let's Go</sm-ui-button> <input type="submit" class="login__form__submit--target"> </form> </sm-ui-modal> <sm-utility-auth id="auth" on-error="_handleError" busy="{{busy}}" authenticated="{{_authenticated}}" email="[[email]]" password="[[password]]"> </sm-utility-auth> </template> <script>!function(){"use strict";var r={};r.classCallCheck=function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")},r.createClass=function(){function r(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}();var e=simpla.constants.easings,t="12px",o={401:"Wrong username or pasword",500:"Something has gone wrong on our servers"},n={observers:["_triggerError(error)"],_triggerError:function(r){void 0!==this._errorCode&&(r?this._triggerErrorOpen():this._triggerErrorClose())},get _errorAnimations(){return{modal:{target:this.$.modal.getModal(),frames:[{transform:"translateX(0)"},{transform:"translateX(-"+t+")"},{transform:"translateX(0)"},{transform:"translateX("+t+")"},{transform:"translateX(0)"}],opts:{easing:"linear",duration:145,iterations:2}},error:{target:this.$.error,frames:[{opacity:0,height:0},{opacity:1,height:"55px"}],opts:{easing:e.easeOutCubic,fill:"both",duration:140,delay:80}}}},_triggerErrorOpen:function(){var r=this,e=this._errorAnimations.modal,t=this._errorAnimations.error,n=void 0;n=e.target.animate(e.frames,e.opts),n.onfinish=function(){r.errorMessage=o[r._errorCode],r.toggleAttribute("visible",!0,r.$.error),t.target.animate(t.frames,t.opts)}},_triggerErrorClose:function(){var r=this,e=this._errorAnimations.error,t=e.target,o=e.frames,n=e.opts,a=void 0;a=t.animate(o.reverse(),n),a.onfinish=function(){r.toggleAttribute("visible",!1,t),r.errorMessage=""}}},a=function(){function e(){r.classCallCheck(this,e)}return r.createClass(e,[{key:"beforeRegister",value:function(){this.is="sm-module-login",this.properties={error:Boolean,busy:{type:Boolean,observer:"_busyChanged"},email:String,password:String,_errorCode:Number,_authenticated:{type:Boolean,observer:"_authenticationChanged"}}}},{key:"login",value:function(r){r.preventDefault(),this.$.auth.login()}},{key:"_handleError",value:function(r){var e=r.detail;this.error=!0,this._errorCode=e.code}},{key:"_authenticationChanged",value:function(r){r&&(this.error=!1)}},{key:"_busyChanged",value:function(r){r&&(this.error=!1)}},{key:"behaviors",get:function(){return[n]}}]),e}();Polymer(a)}();</script></dom-module></body></html>